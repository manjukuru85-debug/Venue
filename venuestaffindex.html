<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>VenueFlow – Staff Approval</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; padding:20px; }
    h1 { text-align:center; }
    .card { background:#fff; padding:15px; margin-bottom:10px; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .status { font-weight:bold; }
    .Pending { color:orange; }
    .Approved { color:green; }
    .Rejected { color:red; }
    button { margin-right:8px; padding:6px 10px; }
  </style>
</head>
<body>

<h1>VenueFlow – Staff Dashboard</h1>
<div id="bookings"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getFirestore, collection, onSnapshot, doc, updateDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBmlReWYMpsnMqVxdIL0V1668ll4XHv_XM",
    authDomain: "venue-76256.firebaseapp.com",
    projectId: "venue-76256",
    storageBucket: "venue-76256.firebasestorage.app",
    messagingSenderId: "927554747990",
    appId: "1:927554747990:web:5fc29c7d96410a8c2205f7"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const container = document.getElementById("bookings");

  onSnapshot(collection(db, "bookings"), (snapshot) => {
    container.innerHTML = "";
    snapshot.forEach((docSnap) => {
      const data = docSnap.data();
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `
        <p><b>${data.venue}</b></p>
        <p>${data.name} | ${data.email}</p>
        <p>Date: ${data.eventDate} | Guests: ${data.guests}</p>
        <p>Total: €${data.totalPrice}</p>
        <p class="status ${data.status}">Status: ${data.status}</p>
        <button onclick="approve('${docSnap.id}')">Approve</button>
        <button onclick="reject('${docSnap.id}')">Reject</button>
      `;
      container.appendChild(div);
    });
  });

  window.approve = async (id) => {
    await updateDoc(doc(db, "bookings", id), { status: "Approved" });
  };

  window.reject = async (id) => {
    await updateDoc(doc(db, "bookings", id), { status: "Rejected" });
  };
</script>

</body>
</html>
